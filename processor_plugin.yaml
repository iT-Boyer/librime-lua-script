#--------------------------------
# custom.yaml
# patch:
#   __include: processor_plugin:/patch
#
#--------------------------------
patch:
  engine/processors/@after 0: lua_processor@init_processor@module_tw
  schema/dependencies/+:
    - essay
    - essay_cn
  module_tw:
    modules:
      - { module: 'command', module_name: "cammand_proc", name_space: "command" }
      - { module: 'component/select_character', module_name: "select_character", name_space: "translator" }
      - { module: 'english', module_name: "english_proc", name_space: "english" }
      - { module: "conjunctive", module_name: "conjunctive_proc", name_space: "conjunctive" }
      - { module: 'multi_reverse', module_name: "multi_reverse_proc", name_space: "multi_reverse" }
    keybinds:
      prtscr: "Control+F12" # commit_text of menu list
      prtkey: "Shift+F12"

    # init_processor   append comopents
    before_modules:
      filters:
        #- lua_filter@stroke_count
        #- lua_filter@debug_filter
      segments:
      translators:
    after_modules:
      filters:
        - lua_filter@stroke_count
        #- uniquifier
        - lua_filter@debug_filter
      segments:
      translators:
        - lua_translator@select_character_tran@select_character   # select_character 配件 模擬矩陣符號表 []1-0 選字 /emj /nu /sma /smb /smc

  # select_character name_space translator 須要調用反查字典和 comment_format 設定 name_space :translator
  # name_space of select_character hot-key
  #
  #translator/dictionary:
  #translator/comment_format:
  #translator/preedit_format:
  translator/keybinds:
    next: bracketleft  # [ --->
    prev: bracketright  # ] <--
  #-------------- modules initialize of name_space
  multi_reverse:
    keybinds:
      toggle: "Control+6"
      qcode: "Control+7"
      completion: "Control+8"
      next: "Control+9"
      prev: "Control+0"
      hold: "Shift_L"
  #------------ english module
  english: #
    tag: abc #  中文模式調用 英文字典 default : none
      #dictionary: english # defaul english_tw 字典橎位置 lua/tools/english.txt
    keybinds:
      toggle: F10 #  enable/disable key

  #繁體使用者 simplifier/opencc_config: t2s.json (預設)  default: 繁體詞庫 enable: 簡體詞庫
  #conjunctive_cn/files: [essay.txt, essay_cn.txt]
  #簡體使用者 simplifier/opencc_config: s2t.json (預設)  default: 體簡詞庫 enable: 繁體詞庫
  #conjunctive_cn/files: [essay_cn.txt, essay.txt]
  conjunctive:
    files: [essay.txt, essay_cn.txt]
    escape_char: ".-"
    keybinds:
      toggle: "F11"

  debug_filter:
    output_format: [dtype,type,start,_end,preedit,quality,input,ainput,error]
    #tags:

  # switches default
  switches/+:
    - name: conjunctive
      states: [ 無,聯]
      reset: 1
    - name: english
      states: [ 無,英]
    - name: multi_reverse
      states: [ 無,查]
    - name: qcode
      states: [ 無,短]
    - name: completion
      states: [ 無,未]
    - name: _debug
      states: [ off, on]
